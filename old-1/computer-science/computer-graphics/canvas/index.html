<html>
<head>
    <link rel="stylesheet" href="./styles.css">
    <style id="style"></style>
    <title>HTML Canvas</title>
</head>
<body>
    <a href="/">Home</a> <br>
    <a href="../">../</a>
    <h1>HTML Canvas</h1>

    <canvas></canvas>

<section class="active">
    <h2>Draw a line</h2>
    <div class="editor-container">
        <div class="editor">const canvas = document.querySelector('canvas');
const ctx = canvas.getContext("2d");
ctx.beginPath();
ctx.moveTo(0, 0);
ctx.lineTo(100, 100);
ctx.stroke();
        </div>
        <button>Run</button>
    </div>
</section>

<section>
    <h2>Draw a square</h2>
    <div class="editor-container">
        <div class="editor">const canvas = document.querySelector('canvas');
const ctx = canvas.getContext("2d");
ctx.fillStyle = 'red';
ctx.fillRect(0, 0, 10, 10);
ctx.fill();
        </div>
        <button>Run</button>
    </div>
</section>

<section>
    <h2>Draw a circle</h2>
    <div class="editor-container">
        <div class="editor">const canvas = document.querySelector('canvas');
const ctx = canvas.getContext("2d");
var center_x = canvas.width  / 2;
var center_y = canvas.height / 2;
var radius = 50;
ctx.beginPath();
const three_sixty_deg = 2 * Math.PI;
ctx.arc(center_x, center_y, radius, 0, three_sixty_deg, false);
ctx.fillStyle = 'rgba(128,0,0,0.5)';
ctx.fill();
ctx.lineWidth = 5;
ctx.strokeStyle = 'darkorchid';
ctx.stroke();
        </div>
        <button>Run</button>
    </div>
</section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>

    <!-- Change CSS programatically -->
    <script>
        const sections = document.querySelectorAll('section');
        const buttons = document.querySelectorAll('button');
        const editors = document.querySelectorAll(".editor");

        // Run the first piece of code on page load:
        const code = ace.edit(editors[0]).getValue();
        try {
            new Function(code)();
        } catch (err) {
            console.error(err);
        }

        // Run a single code section upon button click in each section
        editors.forEach(function(editorElem, idx) {
            const editor = ace.edit(editorElem);
            editor.setTheme("ace/theme/monokai");
            editor.session.setMode("ace/mode/javascript");

            buttons[idx].addEventListener('click', () => {
                const code = editor.getValue();

                // Run the code
                try {
                    new Function(code)();
                } catch (err) {
                    console.error(err);
                }

                for (let i = 0; i < sections.length; ++i) {
                    if (i == idx) {
                        console.log('ADD: i: ', i);
                        sections[i].classList.add('active');
                    } else {
                        console.log('REMOVE: i: ', i);
                        sections[i].classList.remove('active');
                    }
                }

            });

        });

        

    </script>

    <section>
        <strong>References</strong>
        <ul>
            <li>JavaScript: The Definitive Guide [7e] by David Flanigan</li>
            <li><a href="http://www.html5canvastutorials.com/">HTML5 Canvas Tutorials</a></li>
        </ul>
    </section>
</body>
</html>